<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LinnkedOut</title>
    <style>
      :root {
        --bg-void: #0a0a0b;
        --bg-card: #131315;
        --bg-elevated: #1a1a1d;
        --border-subtle: #252528;
        --text-primary: #f5f5f7;
        --text-muted: #8e8e93;
        --text-dim: #5c5c5f;
        --accent-focus: #ff6b6b;
        --accent-personalized: #818cf8;
        --accent-chill: #34d399;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI",
          sans-serif;
        background: var(--bg-void);
        color: var(--text-primary);
        width: 340px;
        min-height: 480px;
        font-size: 13px;
      }

      .container {
        padding: 16px;
      }

      /* Header */
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--border-subtle);
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo {
        width: 28px;
        height: 28px;
      }

      .brand-text h1 {
        font-size: 15px;
        font-weight: 600;
        letter-spacing: -0.3px;
      }

      .brand-text span {
        font-size: 10px;
        color: var(--text-dim);
      }

      .header-btn {
        background: transparent;
        border: none;
        padding: 6px;
        color: var(--text-dim);
        cursor: pointer;
        border-radius: 6px;
        transition: all 0.15s;
      }

      .header-btn:hover {
        background: var(--bg-elevated);
        color: var(--text-muted);
      }

      /* Mode Selector - Compact */
      .mode-selector {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
      }

      .mode-card {
        flex: 1;
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: 10px;
        padding: 10px;
        cursor: pointer;
        transition: all 0.15s;
        text-align: center;
      }

      .mode-card:hover {
        background: var(--bg-elevated);
      }

      .mode-card.active {
        border-color: var(--mode-color);
        background: var(--mode-bg);
      }

      .mode-card.focus {
        --mode-color: var(--accent-focus);
        --mode-bg: rgba(255, 107, 107, 0.08);
      }

      .mode-card.personalized {
        --mode-color: var(--accent-personalized);
        --mode-bg: rgba(129, 140, 248, 0.08);
      }

      .mode-card.chill {
        --mode-color: var(--accent-chill);
        --mode-bg: rgba(52, 211, 153, 0.08);
      }

      .mode-icon {
        font-size: 20px;
        display: block;
        margin-bottom: 4px;
      }

      .mode-name {
        font-size: 11px;
        font-weight: 500;
        color: var(--text-muted);
      }

      .mode-card.active .mode-name {
        color: var(--text-primary);
      }

      /* Sections */
      .section {
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: 10px;
        padding: 12px;
        margin-bottom: 12px;
      }

      .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .section-title {
        font-size: 11px;
        font-weight: 600;
        color: var(--text-dim);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .section-actions {
        display: flex;
        gap: 6px;
      }

      /* Inputs */
      .select-input,
      .text-input {
        width: 100%;
        padding: 8px 10px;
        background: var(--bg-elevated);
        border: 1px solid var(--border-subtle);
        border-radius: 6px;
        color: var(--text-primary);
        font-size: 12px;
      }

      .select-input {
        cursor: pointer;
        margin-bottom: 8px;
      }

      .text-input::placeholder {
        color: var(--text-dim);
      }

      .prompt-editor {
        width: 100%;
        min-height: 120px;
        padding: 10px;
        background: var(--bg-elevated);
        border: 1px solid var(--border-subtle);
        border-radius: 6px;
        color: var(--text-primary);
        font-size: 11px;
        font-family: "SF Mono", Monaco, monospace;
        resize: vertical;
        line-height: 1.5;
      }

      .prompt-editor::placeholder {
        color: var(--text-dim);
      }

      /* Buttons */
      .btn {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s;
        border: none;
      }

      .btn-sm {
        padding: 4px 8px;
        font-size: 10px;
      }

      .btn-primary {
        background: var(--accent-personalized);
        color: white;
      }

      .btn-primary:hover {
        opacity: 0.9;
      }

      .btn-secondary {
        background: var(--bg-elevated);
        border: 1px solid var(--border-subtle);
        color: var(--text-muted);
      }

      .btn-secondary:hover {
        background: var(--bg-card);
        color: var(--text-primary);
      }

      .btn-row {
        display: flex;
        gap: 6px;
        margin-top: 10px;
      }

      /* Status */
      .status-msg {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-top: 8px;
        font-size: 11px;
        padding: 6px 8px;
        border-radius: 6px;
        background: var(--bg-elevated);
      }

      .status-msg.success {
        color: var(--accent-chill);
      }

      .status-msg.error {
        color: var(--accent-focus);
      }

      /* Chill Mode Unlock */
      .chill-unlock {
        padding: 12px;
        background: var(--bg-elevated);
        border-radius: 8px;
        margin-top: 12px;
        display: none;
      }

      .chill-unlock.visible {
        display: block;
      }

      .chill-label {
        font-size: 11px;
        color: var(--text-muted);
        margin-bottom: 6px;
        line-height: 1.4;
      }

      .chill-phrase {
        font-size: 10px;
        color: var(--text-dim);
        font-style: italic;
        margin-bottom: 8px;
        padding: 8px;
        background: var(--bg-card);
        border-radius: 6px;
      }

      .chill-textarea {
        width: 100%;
        padding: 8px;
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: 6px;
        color: var(--text-primary);
        font-size: 11px;
        resize: none;
        min-height: 60px;
      }

      .chill-progress {
        height: 3px;
        background: var(--bg-card);
        border-radius: 2px;
        margin-top: 8px;
        overflow: hidden;
      }

      .chill-progress-bar {
        height: 100%;
        background: var(--accent-chill);
        width: 0%;
        transition: width 0.2s;
      }

      /* Footer */
      .footer {
        text-align: center;
        padding: 12px;
        color: var(--text-dim);
        font-size: 10px;
      }

      .footer a {
        color: var(--accent-personalized);
        text-decoration: none;
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="brand">
          <svg class="logo" viewBox="0 0 24 24" fill="none">
            <rect x="2" y="2" width="8" height="20" rx="2" fill="url(#grad1)" />
            <rect
              x="6"
              y="14"
              width="16"
              height="8"
              rx="2"
              fill="url(#grad2)"
            />
            <rect x="8" y="12" width="4" height="4" fill="#0a0a0b" />
            <defs>
              <linearGradient id="grad1" x1="6" y1="2" x2="6" y2="22">
                <stop stop-color="#818CF8" />
                <stop offset="1" stop-color="#6366F1" />
              </linearGradient>
              <linearGradient id="grad2" x1="14" y1="14" x2="14" y2="22">
                <stop stop-color="#818CF8" />
                <stop offset="1" stop-color="#6366F1" />
              </linearGradient>
            </defs>
          </svg>
          <div class="brand-text">
            <h1>LinnkedOut</h1>
            <span>control your feed</span>
          </div>
        </div>
        <button class="header-btn" id="info-btn" title="Help">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10" />
            <path d="M12 16v-4M12 8h.01" />
          </svg>
        </button>
      </header>

      <!-- Mode Selector - Compact -->
      <div class="mode-selector">
        <div class="mode-card focus" data-mode="focus">
          <span class="mode-icon">üî•</span>
          <span class="mode-name">Focus</span>
        </div>
        <div class="mode-card personalized" data-mode="personalized">
          <span class="mode-icon">‚ú®</span>
          <span class="mode-name">Personalized</span>
        </div>
        <div class="mode-card chill" data-mode="chill">
          <span class="mode-icon">üåô</span>
          <span class="mode-name">Chill</span>
        </div>
      </div>

      <!-- Chill Mode Unlock -->
      <div class="chill-unlock" id="chill-unlock">
        <div class="chill-label">Type this phrase to enable Chill Mode:</div>
        <div class="chill-phrase" id="chill-phrase"></div>
        <textarea
          class="chill-textarea"
          id="chill-input"
          placeholder="Type the phrase..."
        ></textarea>
        <div class="chill-progress">
          <div class="chill-progress-bar" id="chill-progress"></div>
        </div>
      </div>

      <!-- API Configuration -->
      <div class="section" id="api-section">
        <div class="section-header">
          <span class="section-title">üîë API</span>
          <div class="section-actions">
            <button class="btn btn-sm btn-secondary" id="test-api-btn">
              Test
            </button>
            <button class="btn btn-sm btn-primary" id="save-api-btn">
              Save
            </button>
          </div>
        </div>
        <select class="select-input" id="provider-select">
          <option value="gemini">Gemini (Free tier)</option>
          <option value="openai">OpenAI GPT-4o-mini</option>
          <option value="claude">Claude Haiku</option>
        </select>
        <input
          type="password"
          class="text-input"
          id="api-key-input"
          placeholder="API key..."
        />
        <div class="status-msg hidden" id="api-status">
          <span id="api-status-icon">‚úì</span>
          <span id="api-status-text">Saved</span>
        </div>
      </div>

      <!-- Prompt Editor (for Personalized mode) -->
      <div class="section" id="prompt-section">
        <div class="section-header">
          <span class="section-title">üìù Scoring Prompt</span>
          <div class="section-actions">
            <button class="btn btn-sm btn-secondary" id="reset-prompt-btn">
              Reset
            </button>
            <button class="btn btn-sm btn-primary" id="save-prompt-btn">
              Save
            </button>
          </div>
        </div>
        <textarea
          class="prompt-editor"
          id="prompt-editor"
          placeholder="Enter your scoring criteria..."
        ></textarea>
      </div>

      <!-- Footer -->
      <div class="footer">
        <a href="#" id="info-link">How it works</a> ¬∑ v2.0
      </div>
    </div>

    <script type="module" src="./src/popup.ts"></script>
  </body>
</html>
